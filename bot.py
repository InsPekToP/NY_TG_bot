import asyncio
from aiogram import Bot,Dispatcher,types
from aiogram.filters import Command
from aiogram.types import Message,InputMediaPhoto
from config import API_TOKEN
import os

#–í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Å–≤–æ–π —Ç–æ–∫–µ–Ω
TOKEN = API_TOKEN

#–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—å–µ–∫—Ç–∞ –±–æ—Ç–∞
bot = Bot(token=TOKEN)
dp = Dispatcher()


#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
@dp.message(Command("start"))
async def start_command_handler(message:Message):
    await message.answer("–ü—Ä–∏–≤–µ—Ç! üëã\n\n"
        "–Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –∫—É–ø–∏—Ç—å –∫—Ä–æ—Å—Å–æ–≤–∫–∏! üèÄüëü\n\n"
        "–í–æ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –º–æ–∂–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:\n"
        "üëâ /show ‚Äî –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏\n"
        "üëâ /info ‚Äî –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –Ω–∞—Å\n"
        "üëâ /info_bot ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ\n\n"
        "üëâ /help ‚Äî –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º\n\n"
        "–ù–∞—á–Ω–∏ —Å –∫–æ–º–∞–Ω–¥—ã /show, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –Ω–∞—à–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è!")

#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /info
@dp.message(Command("info"))
async def info_command_handler(message:Message):
    await message.answer("–ò—â–µ—à—å –≤—ã–≥–æ–¥–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ –ø–æ–≤–æ–¥—É –æ–±—É–≤–∏? üëü\n\n"
        "‚úÖ–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º **50% —Å–∫–∏–¥–∫—É** –Ω–∞ –ª—é–±—É—é –ø–∞—Ä—É –æ–±—É–≤–∏ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞ NewYorker! üî•\n\n"
        "‚úÖ–í –Ω–∞–ª–∏—á–∏–∏ –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã, –∏ —Ü–µ–Ω—ã –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—Ç **100 z≈Ç**! üí∏\n\n"
        "‚úÖ–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ç—ã –º–æ–∂–µ—à—å –ø–æ–ª—É—á–∏—Ç—å **50 z≈Ç –±–æ–Ω—É—Å–∞** –æ—Ç —Ü–µ–Ω—ã –ª—é–±–æ–π –ø–∞—Ä—ã, –µ—Å–ª–∏ –ø—Ä–∏–≤–µ–¥—ë—à—å –¥—Ä—É–≥–∞!\n\n"
        "‚úÖ–†–∞–±–æ—Ç–∞–µ—Ç –¥–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –¢—Ä—É–π–º—è—Å—Ç—É!üöò\n\n "
        "‚úÖ–ù–µ —É–ø—É—Å—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ—é –∫–æ–ª–ª–µ–∫—Ü–∏—é –∫—Ä–æ—Å—Å–æ–≤–æ–∫ –ø–æ –ª—É—á—à–∏–º —Ü–µ–Ω–∞–º!\n\n"
        "–ï—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ–π /help, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º.")

#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help
@dp.message(Command("help"))
async def help_command_handler(message:Message):
    await message.answer("–ü–æ –≤—Å–µ–º –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–º –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—Å–∞—Ç—å:\n\n"
                        "üôãüèª‚Äç‚ôÄÔ∏è@tanyha_m_25\n"
                        "üôãüèº@boris_serheevich")


#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /info_bot
@dp.message(Command("info_bot"))
async def info_bot_command_handler(message:Message):
    await message.answer( "üëã–Ø –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —Ç–µ–±–µ –≤—ã–≥–æ–¥–Ω–æ –∫—É–ø–∏—Ç—å –∫—Ä–æ—Å—Å–æ–≤–∫–∏! üëü\n\n"
        "üí∏ **–°–∫–∏–¥–∫–∏, –∞–∫—Ü–∏–∏ –∏ –æ—Ç–ª–∏—á–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è** ‚Äî –≤—Å—ë, —á—Ç–æ–±—ã —Ç—ã –Ω–∞—à—ë–ª –∏–¥–µ–∞–ª—å–Ω—É—é –ø–∞—Ä—É –æ–±—É–≤–∏.\n\n"
        "üîí **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å**: —è –Ω–µ —Å–æ–±–∏—Ä–∞—é –∏ –Ω–µ —Ö—Ä–∞–Ω—é –Ω–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö. –í—Å—ë, —á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å, –æ—Å—Ç–∞—ë—Ç—Å—è –º–µ–∂–¥—É –Ω–∞–º–∏!\n\n"
        "‚ùì –ï—Å–ª–∏ —É —Ç–µ–±—è –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /help, —á—Ç–æ–±—ã —Å–≤—è–∑–∞—Ç—å—Å—è —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º. –Ø –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å!")


#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /show
@dp.message(Command("show"))
async def show_command_handler(message:Message):
    folder_path = "img/shoes"  # –ü–∞–ø–∫–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏

    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ
    image_paths = [os.path.join(folder_path, filename) for filename in os.listdir(folder_path) if filename.endswith(('.jpg', '.jpeg', '.png'))]

    if image_paths:
        media_group = []  # –°–ø–∏—Å–æ–∫ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –∫–∞–∫ InputMediaPhoto

        for image_path in image_paths:
            if os.path.isfile(image_path):
                media_group.append(InputMediaPhoto(media=types.FSInputFile(image_path)))

            # –ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–æ—Ç–æ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏—Ö –≤—Å–µ –≤ –æ–¥–Ω–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
        if media_group:
            await message.answer_media_group(media_group)
        else:
            await message.answer("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏.")
    else:
        await message.answer("–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")



#–§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞
async def main():
    try:
        await dp.start_polling(bot)
    finally:
        await bot.session.close()

#–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
if __name__ == "__main__":
    asyncio.run(main())


